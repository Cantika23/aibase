# OpenAI API Configuration
# Uncomment and configure one of the following:

# Option 1: OpenRouter (Free models)
# OPENAI_API_KEY=your-openrouter-api-key
# OPENAI_BASE_URL=https://openrouter.ai/api/v1
# OPENAI_MODEL=openai/gpt-oss-20b:free

# Option 2: Z.AI (GLM-4.6)
OPENAI_API_KEY=your-zai-api-key
OPENAI_BASE_URL=https://api.z.ai/api/coding/paas/v4
OPENAI_MODEL=glm-4.6
OPENAI_MAX_TOKEN=200000

# Thinking mode configuration (for Z.AI and compatible APIs)
# Set to "disabled" to disable reasoning mode (default)
# Set to "enabled" to enable reasoning mode
OPENAI_THINKING_MODE=disabled

# Script tool configuration
# Maximum size (in bytes) for script tool results before truncation
# Default: 50000 (50KB) - adjust based on your needs
SCRIPT_TOOL_MAX_RESULT_SIZE=50000

# URL pathname prefix configuration
# Set this to serve the application from a subpath instead of root
# Example: /myapp or /api/v1
# Leave empty to serve from root (/)
PUBLIC_BASE_PATH=

# Application name
# This will be displayed as browser tab title
APP_NAME=AI-BASE

# Feature Toggles
# Set to "true" or "1" to enable these features
# By default, these features are disabled (set to "false", "0", or leave unset)

# AIMEOW: WhatsApp integration via aimeow service
# When enabled: downloads/launches aimeow binary, registers WhatsApp API endpoints, shows WhatsApp UI
# When disabled: no aimeow download/build, no WhatsApp endpoints, WhatsApp settings hidden
AIMEOW=false

# QDRANT: Vector database for semantic search/embeddings
# When enabled: downloads/launches qdrant binary, configures vector storage
# When disabled: no qdrant download/build, no vector database features
QDRANT=false

# USE_DEFAULT_EXTENSIONS: Extension loading behavior
#
# DEVELOPMENT MODE (USE_DEFAULT_EXTENSIONS=true):
# - Extensions load directly from backend/src/tools/extensions/defaults/
# - Useful for hot-reload during development - changes to extensions take effect immediately
# - No need to copy extensions to project folders
# - All projects share the same extension code
#
# PRODUCTION MODE (USE_DEFAULT_EXTENSIONS=false):
# - Extensions load from data/{projectId}/extensions/ (project-specific)
# - Each project can have different extension versions
# - Extensions must be copied to project folder when project is created
# - Allows customization per project without affecting others
# - More stable - not affected by backend code changes
#
# Default: false (production mode)
USE_DEFAULT_EXTENSIONS=false

# WhatsApp Integration Configuration
# URL of aimeow WhatsApp service API (only used when AIMEOW=true)
# For local development: http://localhost:7031/api/v1
# For Docker with aimeow on host: http://host.docker.internal:7031/api/v1
# For Docker with aimeow in separate container: http://aimeow:7031/api/v1
WHATSAPP_API_URL=http://localhost:7031/api/v1


# =============================================================================
# ENTERPRISE STORAGE CONFIGURATION
# =============================================================================
# 
# For single-node deployments, the defaults (SQLite, local files, memory cache)
# work perfectly. For enterprise scale, configure the options below.
#
# Migration: Use the migration CLI to move data between backends:
#   bun run backend/src/scripts/migrate-storage.ts --help

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# Database type: 'sqlite' (default) or 'postgresql'
DB_TYPE=sqlite

# SQLite Configuration (default - single node)
DB_SQLITE_PATH=data/app/databases/app.db

# PostgreSQL Configuration (enterprise - multi-node)
# Uncomment and configure for PostgreSQL:
# DB_TYPE=postgresql
# DB_PG_HOST=localhost
# DB_PG_PORT=5432
# DB_PG_DATABASE=aibase
# DB_PG_USERNAME=aibase
# DB_PG_PASSWORD=your-secure-password
# DB_PG_SSL=false
# DB_PG_POOL_SIZE=10

# -----------------------------------------------------------------------------
# FILE STORAGE CONFIGURATION
# -----------------------------------------------------------------------------

# File storage type: 'local' (default), 's3', 'azure', 'gcs'
FILE_STORAGE_TYPE=local

# Local Filesystem Configuration (default)
FILE_STORAGE_LOCAL_PATH=data/files

# S3-Compatible Storage Configuration (AWS S3, MinIO, etc.)
# Uncomment and configure for S3:
# FILE_STORAGE_TYPE=s3
# FILE_STORAGE_S3_REGION=us-east-1
# FILE_STORAGE_S3_BUCKET=aibase-files
# FILE_STORAGE_S3_ACCESS_KEY=your-access-key
# FILE_STORAGE_S3_SECRET_KEY=your-secret-key
# FILE_STORAGE_S3_PRESIGNED_EXPIRY=3600
# 
# For MinIO or custom S3 endpoints:
# FILE_STORAGE_S3_ENDPOINT=http://localhost:9000
# FILE_STORAGE_S3_FORCE_PATH_STYLE=true
# FILE_STORAGE_S3_PUBLIC_URL_PREFIX=https://cdn.yourdomain.com

# Azure Blob Storage Configuration
# Uncomment and configure for Azure:
# FILE_STORAGE_TYPE=azure
# FILE_STORAGE_AZURE_CONNECTION_STRING=your-connection-string
# FILE_STORAGE_AZURE_CONTAINER=aibase-files

# Google Cloud Storage Configuration
# Uncomment and configure for GCS:
# FILE_STORAGE_TYPE=gcs
# FILE_STORAGE_GCS_PROJECT_ID=your-project-id
# FILE_STORAGE_GCS_BUCKET=aibase-files
# FILE_STORAGE_GCS_KEY_FILE=/path/to/service-account-key.json

# -----------------------------------------------------------------------------
# CACHE & SESSION CONFIGURATION
# -----------------------------------------------------------------------------

# Cache type: 'memory' (default), 'redis', 'valkey'
CACHE_TYPE=memory

# In-Memory Cache Configuration (default - single node)
CACHE_MEMORY_MAX_SIZE=10000
CACHE_MEMORY_TTL=3600
CACHE_MEMORY_CHECK_PERIOD=600

# Redis Configuration (enterprise - distributed sessions)
# Uncomment and configure for Redis:
# CACHE_TYPE=redis
# CACHE_REDIS_HOST=localhost
# CACHE_REDIS_PORT=6379
# CACHE_REDIS_PASSWORD=your-redis-password
# CACHE_REDIS_DB=0
# CACHE_REDIS_PREFIX=aibase:
# CACHE_REDIS_TLS=false
# CACHE_REDIS_MAX_RETRIES=3
# CACHE_REDIS_RETRY_DELAY=100

# Valkey Configuration (AWS ElastiCache compatible)
# Uncomment and configure for Valkey:
# CACHE_TYPE=valkey
# CACHE_VALKEY_HOST=your-valkey-endpoint.cache.amazonaws.com
# CACHE_VALKEY_PORT=6379
# CACHE_VALKEY_PASSWORD=your-valkey-password
# CACHE_VALKEY_DB=0
# CACHE_VALKEY_PREFIX=aibase:
# CACHE_VALKEY_TLS=true

# -----------------------------------------------------------------------------
# MIGRATION MODE
# -----------------------------------------------------------------------------

# Set to 'true' to enable read-only migration mode
# This prevents writes during data migration between backends
STORAGE_MIGRATION_MODE=false
